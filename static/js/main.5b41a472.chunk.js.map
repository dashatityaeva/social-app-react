{"version":3,"sources":["redux/dialogs-reducer.js","components/Profile/MyPosts/MyPosts.module.css","components/Profile/Profile.module.css","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Navbar/Navbar.module.css","components/common/FormsControls/FormsControls.js","reportWebVitals.js","assets/preloader.svg","components/common/Preloader/Preloader.js","components/Header/Header.jsx","api/api.js","redux/auth-reducer.js","components/Header/HeaderContainer.jsx","components/Login/Login.jsx","components/Navbar/Navbar.jsx","redux/profile-reducer.js","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/ProfileInfo/ProfileStatus/ProfileStatus.jsx","components/Profile/ProfileInfo/ProfileStatus/ProfileStatusWithHook.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx","utils/objects-helpers.js","redux/users-reducer.js","components/common/Pagination/Pagination.jsx","assets/user.jpg","components/Users/User.jsx","components/Users/Users.jsx","redux/users-selectors.js","components/Users/UsersContainer.jsx","redux/app-reducer.js","redux/sidebar-reducer.js","redux/redux-store.js","App.js","hoc/withSuspense.js","index.js","utils/validators/validators.js","components/common/FormsControls/FormsControls.module.css","components/Users/Users.module.css","hoc/withAuthRedirect.js","components/Header/Header.module.css","components/Profile/MyPosts/Post/Post.module.css","components/common/Pagination/Pagination.module.css"],"names":["SEND_MESSAGE","initialState","dialogs","id","name","messages","text","sendMessageActionCreater","messageText","type","dialogsReducer","state","action","newMessage","module","exports","FormControl","input","meta","touched","error","children","hasError","className","st","formControl","formInfo","Textarea","props","restProps","Input","createField","placeholder","component","validators","validate","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Preloader","style","backgroundColor","alt","src","preloader","Header","header","loginBlock","isAuth","onClick","logout","to","instance","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPageNumber","pageSize","get","response","data","follow","userId","post","unfollow","delete","getProfile","console","warn","profileAPI","getStatus","updateStatus","status","put","authAPI","email","password","rememberMe","SET_USER_DATA","login","setAuthUserData","payload","getAuthUserData","dispatch","a","resultCode","authReducer","HeaderContainer","this","React","Component","connect","auth","LoginReduxForm","reduxForm","form","handleSubmit","onSubmit","required","formCommonError","messageError","length","stopSubmit","_error","log","formData","Navbar","nav","list","item","activeClassName","activeLink","ADD_POST","DELETE_POST","SET_USER_PROFILE","SET_STATUS","posts","likeCount","newPostText","profile","setStatus","profileReducer","newPost","filter","postId","Post","avatar","srcset","message","like","maxLength10","maxLengthCreator","PostReduxForm","Field","MyPosts","postElements","map","p","values","addPost","MyPostsContainer","profilePage","addPostActionCreater","ProfileStatusWithHook","useState","editMode","setEditMode","useEffect","autoFocus","onBlur","value","onChange","e","target","onDoubleClick","ProfileInfo","banner","photos","large","aboutMe","Profile","border","stat","ProfileContainer","match","params","authUserId","history","push","prevProps","prevState","setState","statusik","compose","withRouter","updateObjectToArray","items","itemId","objPropName","newObjProps","user","FOLLOW","UNFOLLOW","SET_USERS","SET_TOTAL_COUNT","SET_CURRENT_PAGE","TOGGLE_IS_FETCHING","TOGGLE_FOLLOWING_PROGRESS","users","totalCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setCurrentPage","currentPage","toggleIsFetching","toggleFollowingProgress","followUnfollowFlow","apiMethod","actionCreator","usersReducer","followed","count","Pagination","totalItemsCount","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","portionCount","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","page","cn","pageActive","pageNumber","User","userItem","userImg","defaultImg","disabled","some","userInfo","Users","selectUsers","createSelector","usersPageName","u","selectTotalCount","selectPageSize","selectCurrentPageNumber","selectIsFetching","selectFollowingInProgress","UsersContainer","withAuthRedirect","bind","userchiki","INITIALIZED_SUCCESS","initialized","appReducer","inisialState","sidebarReducer","reducers","combineReducers","app","dialogsPage","sidebar","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","DialogsContainer","lazy","App","initializeApp","exact","path","render","fallback","AppContainer","MainApp","StrictMode","basename","process","ReactDOM","document","getElementById","maxLength","mapStateToPropsForRedirect","RedirectComponent"],"mappings":"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","file":"static/js/main.5b41a472.chunk.js","sourcesContent":["const SEND_MESSAGE = 'SEND-MESSAGE';\r\n\r\n//при первом запуске д.б. \r\n//начальное состояние (по умолчанию) initialState!\r\n\r\nlet initialState = {\r\n    dialogs: [ \r\n        {id: \"1\",name: \"Masha\"},\r\n        {id: \"2\",name: \"peter\"},\r\n        {id: \"3\",name: \"grisha\"},\r\n    ],\r\n    messages: [ \r\n        {id: \"1\",text: \"Hi\"},\r\n        {id: \"2\",text: \"Hi\"},\r\n        {id: \"3\",text: \"lalal\"}\r\n    ],\r\n};\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            let newMessage =  action.messageText;\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, {id: \"4\", text: newMessage}],\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const sendMessageActionCreater = (messageText) => ({type: SEND_MESSAGE, messageText});\r\n\r\nexport default dialogsReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"posts\":\"MyPosts_posts__2rOvD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border\":\"Profile_border__3dahG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"banner\":\"ProfileInfo_banner__44wGC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__3xYCh\",\"list\":\"Navbar_list__1zrT4\",\"item\":\"Navbar_item__1wCQz\",\"activeLink\":\"Navbar_activeLink__1m-As\"};","import st from './FormsControls.module.css'\r\nimport { Field } from 'redux-form'\r\n\r\nexport const FormControl = ({input, meta: {touched, error}, children }) => {\r\n\r\n    const hasError = touched && error;\r\n    return (\r\n        <div className={st.formControl + \" \" + (hasError ? st.error : \"\")}>\r\n\r\n            {hasError &&  <span className={st.formInfo}>{ error}</span>}\r\n           \r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return <FormControl {...props}><textarea {...input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport const Input = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return <FormControl {...props}><input {...input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport const createField = (placeholder, component, validators, name, props={}, text=\"\") => {\r\n    return <>\r\n        <Field name={name} component={component} validate={validators} placeholder={placeholder} {...props}/>\r\n        <span>{text}</span>\r\n    </>\r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export default __webpack_public_path__ + \"static/media/preloader.0caafad6.svg\";","\r\nimport preloader from '../../../assets/preloader.svg';\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <div style={{backgroundColor: 'white'}}>\r\n            <img alt=\"preloader\" src={preloader}/> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader;","import { NavLink } from 'react-router-dom'\r\nimport st from './Header.module.css'\r\n\r\nconst Header = (props) => {\r\n    return (\r\n        <header className={st.header}>\r\n            <img src=\"https://s0.rbk.ru/v6_top_pics/media/img/9/86/756006923345869.jpg\" alt=\"логотип\"/>\r\n            <div className={st.loginBlock}>\r\n                 {props.isAuth \r\n                    ? <div>\r\n                        Hi,{props.name}!\r\n                        <button onClick={props.logout}>Logout</button>\r\n                      </div> \r\n                    : <NavLink to={'/login'}>Login</NavLink>}\r\n               \r\n            </div>\r\n        </header>\r\n    )\r\n} \r\n\r\n\r\nexport default Header;","import axios from \"axios\";\r\n\r\n//делаем базовые настройки\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n    headers: {\r\n        \"API-KEY\" : \"21bad7e4-4a7c-424d-aba5-459d9de2ef78\"\r\n      }\r\n})\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPageNumber = 1, pageSize = 100) {\r\n        return instance.get(`users?page=${currentPageNumber}&count=${pageSize}`).then(response => response.data)\r\n    },\r\n\r\n    follow(userId) {\r\n        return instance.post(`follow/${userId}`);\r\n    },\r\n\r\n    unfollow(userId) {\r\n        return instance.delete(`follow/${userId}`)\r\n    },\r\n\r\n    getProfile(userId) {\r\n        console.warn('Please, use profileAPI object instead of usersAPI object');\r\n        return profileAPI.getProfile(userId);\r\n    }\r\n    \r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId) {\r\n        return instance.get(`profile/${userId}`)\r\n    },\r\n    getStatus(userId) {\r\n        return instance.get(`profile/status/${userId}`)\r\n    },\r\n    updateStatus(status) {\r\n        return instance.put(`profile/status`, {status: status})\r\n    }\r\n} \r\n\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get(`auth/me`);\r\n    },\r\n    login(email, password, rememberMe = false) {\r\n        return instance.post(`auth/login`, {email, password, rememberMe });\r\n    },\r\n    logout() {\r\n        return instance.delete(`auth/login`);\r\n    }\r\n}","import { authAPI } from \"../api/api\";\r\nimport {stopSubmit} from 'redux-form';\r\n\r\n//задавать более уникальное имя\r\nconst SET_USER_DATA = 'auth/SET_USER_DATA';\r\n\r\n\r\nlet initialState = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SET_USER_DATA: \r\n            return {...state, \r\n                ...action.payload\r\n            };\r\n        default:\r\n            return state;;\r\n    }\r\n}\r\n\r\nconst setAuthUserData = (id, email, login, isAuth) => (\r\n    {type: SET_USER_DATA, payload: {id, email, login, isAuth}}\r\n    );\r\n//использовать не promise, а async-await\r\nexport const getAuthUserData = () =>  async (dispatch) => { \r\n    let response = await authAPI.me()\r\n        \r\n    if (response.data.resultCode === 0) {\r\n        let {email,id, login} = response.data.data\r\n        dispatch(setAuthUserData(id, email, login, true));\r\n    } \r\n}\r\n\r\n\r\nexport const login = (email, password, rememberMe) => async (dispatch) => {\r\n    let response = await authAPI.login(email, password, rememberMe)\r\n    \r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getAuthUserData());\r\n    } else {\r\n        let messageError = response.data.messages.length > 0 \r\n            ? response.data.messages[0] \r\n            : \"Some error\"\r\n        dispatch(stopSubmit(\"login\" ,{_error: messageError}));\r\n    }\r\n}\r\n\r\n\r\nexport const logout = () => async (dispatch) => {\r\n    let response = await authAPI.logout();\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false));\r\n    }\r\n}\r\n\r\n\r\nexport default authReducer;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Header from './Header'\r\nimport {logout} from \"../../redux/auth-reducer\"\r\n\r\n\r\nclass HeaderContainer extends React.Component {\r\n\r\n\r\n\r\n    render() {\r\n        return <Header {...this.props}/>\r\n    }\r\n} \r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        name: state.auth.login\r\n    }\r\n  }\r\n\r\nexport default connect(mapStateToProps, {logout})(HeaderContainer);","import { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Field, reduxForm } from 'redux-form'\r\nimport { login } from '../../redux/auth-reducer';\r\nimport { required } from '../../utils/validators/validators';\r\nimport { createField, Input } from '../common/FormsControls/FormsControls';\r\nimport st from './../../components/common/FormsControls/FormsControls.module.css'\r\n\r\nconst LoginForm = ({handleSubmit, error}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                {/* <Field name=\"login\" component={Input} validate={[required]} type=\"text\"  placeholder=\"Your login\"/> */}\r\n                {createField(\"Your login\", Input, [required], \"login\")}\r\n            </div>\r\n            <div>\r\n                {/* <Field name=\"password\" component={Input} validate={[required]} type=\"password\"  placeholder=\"Your password\"/> */}\r\n                {createField(\"Your password\", Input, [required], \"password\", {type: \"password\"})}\r\n            </div>\r\n            <div>\r\n                {/* <Field name=\"rememberMe\" component={Input} type=\"checkbox\" /><span>remember me</span> */}\r\n                {createField(null, Input, [], \"rememberMe\", {type: \"checkbox\"}, \"remember me\")}\r\n            </div>\r\n            {error &&  <div className={st.formCommonError}>{error}</div>}\r\n           \r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({form: 'login'})(LoginForm);\r\n\r\nconst Login = (props) => {\r\n    console.log('props: ', props);\r\n    const onSubmit = (formData) => {\r\n        //в formData сидят все данные с формы логинизации\r\n        // console.log('formData: ', formData);\r\n        let {login: email, password, rememberMe} = formData;\r\n        props.login(email, password, rememberMe);\r\n    }\r\n\r\n    if (props.isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n\r\n    return <div>\r\n        <h1>Login page</h1>\r\n        <LoginReduxForm onSubmit={onSubmit}/>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n    }\r\n  }\r\n\r\n\r\nexport default connect(mapStateToProps, {login})(Login);","import { NavLink } from 'react-router-dom';\r\nimport st from './Navbar.module.css'\r\n\r\nconst Navbar = () => {\r\n    return (\r\n        <nav className={st.nav}>\r\n        <ul className={st.list}>\r\n          <li className={`${st.item}`}>\r\n            <NavLink activeClassName={st.activeLink} to=\"/profile\">Profile</NavLink>\r\n          </li>\r\n          <li className={st.item}>\r\n            <NavLink activeClassName={st.activeLink} to=\"/messages\">Messages</NavLink>\r\n          </li>\r\n          <li className={st.item}>\r\n            <NavLink activeClassName={st.activeLink} to=\"/news\">News</NavLink>\r\n          </li>\r\n          <li className={st.item}>\r\n            <NavLink activeClassName={st.activeLink} to=\"/music\">Music</NavLink>\r\n          </li>\r\n          <li className={st.item}>\r\n            <NavLink activeClassName={st.activeLink} to=\"/users\">Users</NavLink>\r\n          </li>\r\n          <li className={st.item}>\r\n            <NavLink activeClassName={st.activeLink} to=\"/settings\">Settings</NavLink>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    )\r\n} \r\n\r\nexport default Navbar;","import { profileAPI, usersAPI } from \"../api/api\";\r\n\r\nconst ADD_POST = 'ADD_POST';\r\nconst DELETE_POST = 'DELETE_POST';\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\n\r\n\r\nlet initialState = {\r\n    posts: [\r\n        {id: 1, post: \"Hi\", likeCount:11},\r\n        {id: 2, post: \"Hi\", likeCount:121},\r\n        {id: 3, post: \"lalal\", likeCount:111},\r\n        {id: 4, post: \"lalal\", likeCount:111}\r\n    ],\r\n    newPostText: 'Текст поста №1',\r\n    profile: null,\r\n};\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case ADD_POST: \r\n            let newPost = {\r\n                id: 5,\r\n                post: action.newPostText,\r\n                likeCount: 0\r\n            };\r\n            return {...state,\r\n                posts: [...state.posts, newPost],\r\n            };\r\n        case DELETE_POST: \r\n            return {...state, posts: state.posts.filter(post => post.id !== action.postId)};\r\n        case SET_USER_PROFILE: \r\n            return {...state, profile: action.profile };\r\n        case SET_STATUS: \r\n            return {...state, status: action.status};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const addPostActionCreater = (newPostText) => ({type: ADD_POST, newPostText});\r\nexport const setUserProfile = (profile) => ({type: SET_USER_PROFILE, profile});\r\nexport const setStatus = (status) => ({type: SET_STATUS, status: status});\r\nexport const deletePost = (postId) => ({type: DELETE_POST, postId});\r\n\r\n//thunks\r\nexport const getProfile = (userId) => {\r\n    return (dispatch) => {\r\n        usersAPI.getProfile(userId)\r\n            .then(response => {\r\n                dispatch(setUserProfile(response.data));\r\n            });\r\n    }\r\n}\r\n\r\nexport const getStatus = (userId) => {\r\n    return (dispatch) => {\r\n        profileAPI.getStatus(userId)\r\n            .then(response => {\r\n                dispatch(setStatus(response.data));\r\n            });\r\n    }\r\n}\r\n\r\nexport const updateStatus = (status) => {\r\n    return (dispatch) => {\r\n        profileAPI.updateStatus(status)\r\n            .then(response => {\r\n                if(response.data.resultCode === 0) {\r\n                    dispatch(setStatus(status));\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport default profileReducer;","import React from \"react\";\r\nimport st from './Post.module.css'\r\n\r\nconst Post = (props) => {\r\n    return ( \r\n        <div className={st.post}>\r\n            <img className={st.avatar} src=\"https://i.pinimg.com/originals/9c/77/46/9c7746225873e02d83b9315501b8dd2f.jpg\" alt=\"\" srcset=\"\" />\r\n            <p>{props.message}</p>\r\n            <div><span>&#128525;--{props.like}</span></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Post;","import React from \"react\";\r\nimport st from './MyPosts.module.css'\r\nimport Post from \"./Post/Post\";\r\nimport { Field, reduxForm } from 'redux-form'\r\nimport { maxLengthCreator, required } from \"../../../utils/validators/validators\";\r\nimport { Textarea } from \"../../common/FormsControls/FormsControls\";\r\n\r\nconst MyPosts = (props) =>  {\r\n\r\n  //проверка для не рендеринга компонета при старых props, state\r\n  //это делается автоматически в PureComponent(в классовом компоненте)\r\n  // shouldComponentUpdate(nextProps, nextState) {\r\n  //   return nextProps !== this.props || nextState !== this.state;\r\n  // }\r\n  //или можно использовать React.memo()\r\n\r\n  console.log(\"render\");\r\n\r\n    let postElements = props.posts.map(p => <Post key={p.id} message={p.post} like={p.likeCount}/>)\r\n\r\n    let addNewPostText = (values) => {\r\n      let newPostText = values.newPostText;\r\n      props.addPost(newPostText);\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          My posts\r\n          <PostReduxForm onSubmit={addNewPostText}/>\r\n        </div>\r\n        <div className={st.posts}>\r\n          {postElements}\r\n        </div>\r\n      </div>\r\n    )\r\n\r\n}\r\n\r\nlet maxLength10 = maxLengthCreator(10);\r\n\r\nconst PostForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.handleSubmit}>\r\n        <Field component={Textarea} name=\"newPostText\" validate={[required, maxLength10]} placeholder=\"type post...\"/>\r\n        <button >Add post</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst PostReduxForm = reduxForm({form: 'postNewTextForm'})(PostForm);\r\n\r\nexport default MyPosts;","import { connect } from \"react-redux\";\r\nimport {addPostActionCreater} from '../../../redux/profile-reducer'\r\nimport MyPosts from \"./MyPosts\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        posts: state.profilePage.posts,\r\n        newPostText: state.profilePage.newPostText\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addPost: (newPostText) => {\r\n            dispatch(addPostActionCreater(newPostText));\r\n        }\r\n    }\r\n}\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\r\n\r\nexport default MyPostsContainer;","import React from \"react\";\r\n\r\nclass ProfileStatus extends React.Component {\r\n \r\n    state = {\r\n        editMode: false,\r\n        status: this.props.status\r\n    }\r\n\r\n    activateEditMode = () => {\r\n        this.setState({\r\n            editMode: true\r\n        });\r\n    }\r\n    deactivateEditMode = () => {\r\n        this.setState({\r\n            editMode: false\r\n        });\r\n        this.props.updateStatus(this.state.status);\r\n    }\r\n    onStatusChange = (e) => {\r\n        this.setState({\r\n            status:  e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {\r\n                    !this.state.editMode \r\n                    ? <div><span onDoubleClick={this.activateEditMode}>{this.props.status || \"---\"}</span></div>\r\n                    : <div><input autoFocus={true} onBlur={this.deactivateEditMode} \r\n                                  onChange={this.onStatusChange}  value={this.state.status}/></div>\r\n                }\r\n                \r\n            </div>\r\n            )\r\n    }\r\n}\r\n\r\nexport default ProfileStatus;","import React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nconst ProfileStatusWithHook = (props) => {\r\n    //деструктуризация массива\r\n    let [editMode, setEditMode] = useState(false);\r\n    let [status, setStatus] = useState(props.status);\r\n\r\n    useEffect(()=>{\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true);\r\n    }\r\n    const deactivateEditMode = () => {\r\n        setEditMode(false);\r\n        props.updateStatus(status);\r\n    }\r\n    const onStatusChange = (e) => {\r\n        setStatus(e.target.value)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {\r\n               !editMode\r\n                ? <div><span onDoubleClick={activateEditMode}>{props.status || \"---\"}</span></div>\r\n                : <div><input autoFocus={true} onBlur={deactivateEditMode}  \r\n                              value={status}  onChange={onStatusChange} /></div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileStatusWithHook;","import React from \"react\";\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport st from './ProfileInfo.module.css';\r\nimport ProfileStatus from \"./ProfileStatus/ProfileStatus\";\r\nimport ProfileStatusWithHook from \"./ProfileStatus/ProfileStatusWithHook\";\r\n\r\nconst ProfileInfo = (props) => {\r\n\r\n    if(!props.profile) {\r\n        return <Preloader/>\r\n    }\r\n    return ( \r\n        <div>\r\n            <div>\r\n                <img className={st.banner} src=\"https://img.freepik.com/free-vector/neon-lights-background-theme_52683-44625.jpg?size=626&ext=jpg\" alt=\"banner\"></img>\r\n            </div>\r\n            <div>\r\n                <img src={props.profile.photos.large} alt=\"avatar\"></img>\r\n                <div>{props.profile.aboutMe}</div>\r\n                {/* <ProfileStatus status={props.status} updateStatus={props.updateStatus}/> */}\r\n                <ProfileStatusWithHook status={props.status} updateStatus={props.updateStatus}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default ProfileInfo;","import MyPostsContainer from './MyPosts/MyPostsContainer';\r\nimport st from './Profile.module.css'\r\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\r\n\r\nconst Profile = (props) => {\r\n    return (\r\n      <div className={st.border}>\r\n        <ProfileInfo profile={props.profile} status={props.stat} updateStatus={props.updateStatus}/>\r\n        <MyPostsContainer />\r\n     </div>\r\n    )\r\n} \r\n\r\nexport default Profile;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Profile from './Profile';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { getProfile, getStatus, updateStatus } from '../../redux/profile-reducer';\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { compose } from 'redux';\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n  componentDidMount() {\r\n\r\n    let userId = this.props.match.params.userId;\r\n    if (!userId) {\r\n      userId = this.props.authUserId;\r\n      if(!userId) {\r\n        this.props.history.push(\"/login\");\r\n      }\r\n    }\r\n\r\n    this.props.getProfile(userId);\r\n    this.props.getStatus(userId);\r\n  }\r\n  \r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.status !== this.props.status) {\r\n      this.setState({\r\n        status: this.props.status\r\n      })\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    return <Profile {...this.props} profile={this.props.profile} stat = {this.props.statusik} updateStatus={this.props.updateStatus}/>\r\n  }\r\n} \r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n     profile: state.profilePage.profile,\r\n     statusik: state.profilePage.status,\r\n     authUserId: state.auth.id,\r\n     isAuth: state.auth.isAuth\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, {getProfile, getStatus, updateStatus}),\r\n  withRouter\r\n)(ProfileContainer);;","export let updateObjectToArray = (items, itemId, objPropName, newObjProps) => {\r\n    return items.map(user => {\r\n        if(user[objPropName] === itemId) {\r\n        return {...user, ...newObjProps}\r\n        }\r\n        return user\r\n    })\r\n}","import { usersAPI } from \"../api/api\";\r\nimport { updateObjectToArray } from \"../utils/objects-helpers\";\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET_USERS';\r\nconst SET_TOTAL_COUNT = 'SET_TOTAL_COUNT';\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING';\r\nconst TOGGLE_FOLLOWING_PROGRESS = 'TOGGLE_FOLLOWING_PROGRESS';\r\n\r\nlet initialState = {\r\n    users: [],\r\n    totalCount: 0,\r\n    pageSize: 100,\r\n    currentPageNumber: 1,\r\n    isFetching: false,\r\n    followingInProgress: [2,3]\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case FOLLOW: \r\n            return {\r\n                ...state,\r\n                users: updateObjectToArray( state.users, action.userId, \"id\", {followed: true} )\r\n            }\r\n        case UNFOLLOW: \r\n            return {\r\n                ...state,\r\n                users:updateObjectToArray( state.users, action.userId, \"id\", {followed: false} )\r\n            }\r\n        case SET_USERS: \r\n            return {...state, users: action.users}\r\n        case SET_TOTAL_COUNT: \r\n            return {...state, totalCount: action.count }\r\n        case SET_CURRENT_PAGE: \r\n            return {...state, currentPageNumber: action.currentPageNumber }\r\n        case TOGGLE_IS_FETCHING: \r\n            return {...state, isFetching: action.isFetching }\r\n        case TOGGLE_FOLLOWING_PROGRESS: \r\n            return {...state, \r\n                followingInProgress: action.isFetching \r\n                ? [...state.followingInProgress, action.userId]\r\n                : state.followingInProgress.filter(id => id !== action.userId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n//actions\r\n\r\nexport const followSuccess  = (id) => ({type: FOLLOW, userId: id});\r\nexport const unfollowSuccess = (id) => ({type: UNFOLLOW, userId: id});\r\nexport const setUsers = (userchiki) => ({type: SET_USERS, users: userchiki});\r\nexport const setTotalCount = (totalCount) => ({type: SET_TOTAL_COUNT, count: totalCount});\r\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPageNumber: currentPage});\r\nexport const toggleIsFetching = (isFetching) => ({type: TOGGLE_IS_FETCHING, isFetching});\r\nexport const toggleFollowingProgress= (isFetching, userId) => ({type: TOGGLE_FOLLOWING_PROGRESS, isFetching, userId});\r\n\r\n\r\n//thunk\r\n//пример замыкания currentPageNumber и pageSize!!!\r\n\r\nexport const getUsers = (currentPageNumber, pageSize) => {\r\n    return (dispatch) => {\r\n        dispatch(toggleIsFetching(true));\r\n        dispatch(setCurrentPage(currentPageNumber));\r\n    \r\n        usersAPI.getUsers(currentPageNumber, pageSize).then(data => {\r\n            dispatch(toggleIsFetching(false));\r\n            dispatch(setUsers(data.items));\r\n            dispatch(setTotalCount(data.totalCount));\r\n        });\r\n    }\r\n}\r\n\r\n\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n    dispatch(toggleFollowingProgress(true, userId));\r\n\r\n    let response = await apiMethod(userId);\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(actionCreator(userId));\r\n    }\r\n\r\n    dispatch(toggleFollowingProgress(false, userId));\r\n}\r\n\r\nexport const follow = (userId) => {\r\n    return async (dispatch) => {\r\n        followUnfollowFlow(dispatch, userId,  usersAPI.follow.bind(usersAPI), followSuccess );\r\n    }\r\n}\r\n\r\nexport const unfollow = (userId) => {\r\n    return async (dispatch) => {\r\n        followUnfollowFlow(dispatch, userId,  usersAPI.unfollow.bind(usersAPI), unfollowSuccess );\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default usersReducer;\r\n\r\n","import { useState } from 'react';\r\nimport st from './Pagination.module.css'\r\nimport cn from 'classnames'\r\n\r\nconst Pagination = ({pageSize, currentPageNumber, totalItemsCount, onPageChanged, portionSize = 10}) => {\r\n\r\n  let pagesCount = Math.ceil(totalItemsCount / pageSize);\r\n  let pages = [];\r\n  for (let i = 1; i <= pagesCount; i++) {pages.push(i);}\r\n\r\n  let portionCount = Math.ceil(pagesCount / portionSize);\r\n  console.log('portionCount: ', portionCount);\r\n  let [portionNumber, setPortionNumber] = useState(1);\r\n  let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n  let rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n  return (\r\n    <div>\r\n      {portionNumber > 1 && <button onClick={() => {setPortionNumber(portionNumber - 1)}}>Prev</button>}\r\n\r\n      { pages.filter(page => page >= leftPortionPageNumber && page <= rightPortionPageNumber)\r\n        .map(page => {\r\n          return <span onClick={()=> { onPageChanged(page) }} \r\n          className={ cn({[st.pageActive]: currentPageNumber === page }, st.pageNumber)} key={page}>{page}</span>\r\n        })\r\n       \r\n      }\r\n\r\n      {portionCount > portionNumber && <button onClick={() => {setPortionNumber(portionNumber + 1)}}>Next</button>}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Pagination;","export default __webpack_public_path__ + \"static/media/user.91fbde6d.jpg\";","import st from './Users.module.css'\r\nimport defaultImg from '../../assets/user.jpg'\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst User = ({user, followingInProgress, unfollow, follow}) => {\r\n\r\n    return (\r\n    <div className={st.userItem}>\r\n      <div>\r\n          <NavLink to={\"/profile/\" + user.id}>\r\n            <img alt=\"avatar\" className={st.userImg} src={user.photos.large !== null ? user.photos.large : defaultImg}/> \r\n          </NavLink>\r\n\r\n          {\r\n            user.followed\r\n              ? <button disabled={followingInProgress.some(id => id === user.id)} \r\n                  onClick={() => {unfollow(user.id);}}>Unfollow</button>\r\n\r\n              : <button disabled={followingInProgress.some(id => id === user.id)} \r\n                  onClick={() => {follow(user.id);}}>Follow</button>\r\n          }\r\n\r\n      </div>\r\n      <div className={st.userInfo}>\r\n        <div>\r\n          <p>{user.name}</p>\r\n          <p>{user.status !== null ? user.status : 'Статус не установлен'}</p>\r\n        </div>\r\n        <div>\r\n          <address>\r\n            <span>{\"user.location.country\"}\r\n            </span>\r\n            <span>{\"user.location.city\"}</span>\r\n          </address>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default User;","import st from './Users.module.css'\r\nimport Pagination from '../common/Pagination/Pagination';\r\nimport User from './User';\r\n\r\nconst Users = ({pageSize, currentPageNumber, totalCount, onPageChanged, ...props}) => {\r\n\r\n    return (\r\n        <div className={st.users}>\r\n          <Pagination pageSize={pageSize} currentPageNumber={currentPageNumber} \r\n                      totalItemsCount={totalCount} onPageChanged={onPageChanged} portionSize={10} />\r\n         \r\n        Users:\r\n        <div>\r\n          {\r\n            props.users.map(user => <User key={user.id} user={user}\r\n              followingInProgress={props.followingInProgress} unfollow={props.unfollow} follow={props.follow}/>)\r\n          }\r\n        </div>\r\n      </div>\r\n      )\r\n}\r\n\r\nexport default Users;","import { createSelector } from 'reselect'\r\n\r\nconst selectUsersSimple = (state) => {\r\n    return state.usersPageName.users\r\n}\r\n\r\n\r\nexport const selectUsers = createSelector(selectUsersSimple,\r\n    (users) => {\r\n        return users.filter(u => true)\r\n    }\r\n)  \r\n\r\nexport const selectTotalCount = (state) => {\r\n    return state.usersPageName.totalCount;\r\n}\r\n\r\nexport const selectPageSize = (state) => {\r\n    return state.usersPageName.pageSize;\r\n}\r\n\r\nexport const selectCurrentPageNumber = (state) => {\r\n    return state.usersPageName.currentPageNumber;\r\n}\r\n\r\nexport const selectIsFetching = (state) => {\r\n    return state.usersPageName.isFetching;\r\n}\r\n\r\nexport const selectFollowingInProgress = (state) => {\r\n    return state.usersPageName.followingInProgress;\r\n}","import { connect } from \"react-redux\";\r\nimport { follow, setCurrentPage, unfollow, toggleFollowingProgress, getUsers } from \"../../redux/users-reducer\";\r\nimport React from 'react';\r\nimport Users from './Users';\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\";\r\nimport { compose } from \"redux\";\r\nimport { selectCurrentPageNumber, selectFollowingInProgress, selectIsFetching, selectPageSize, selectTotalCount, selectUsers } from \"../../redux/users-selectors\";\r\n\r\n\r\nclass UsersContainer extends React.Component {\r\n\r\n    componentDidMount() {\r\n      //внутренняя деструктуризация \r\n      const {currentPageNumber, pageSize} = this.props;\r\n      this.props.getUsers(currentPageNumber, pageSize);\r\n    }\r\n  \r\n    onPageChanged = (currentPage) => {\r\n      this.props.setCurrentPage(currentPage); // делаем активную страницу жирным\r\n      this.props.getUsers(currentPage, this.props.pageSize);\r\n    }\r\n  \r\n    render() {\r\n      return <>\r\n        {this.props.isFetching ? <Preloader/> : null}\r\n      <Users totalCount={this.props.totalCount}\r\n            pageSize={this.props.pageSize} \r\n            currentPageNumber={this.props.currentPageNumber}\r\n            users={this.props.users}\r\n            onPageChanged = {this.onPageChanged}\r\n            follow = {this.props.follow}\r\n            unfollow = {this.props.unfollow}\r\n            followingInProgress = {this.props.followingInProgress}\r\n      />\r\n      </>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        users: selectUsers(state),\r\n        totalCount: selectTotalCount(state),\r\n        pageSize: selectPageSize(state),\r\n        currentPageNumber: selectCurrentPageNumber(state),\r\n        isFetching: selectIsFetching(state),\r\n        followingInProgress: selectFollowingInProgress(state)\r\n    }\r\n}\r\n\r\n//раньше создавали mapDispatchToProps и передавали его в connect()\r\n// const mapDispatchToProps = (dispatch) => {\r\n//     return {\r\n//         follow: (id) => {\r\n//             dispatch(followAC(id));\r\n//         },\r\n//         unfollow: (id) => {\r\n//             dispatch(unfollowAC(id));\r\n//         },\r\n//         setUsers: (users) => {\r\n//             dispatch(setUsersAC(users));\r\n//         },\r\n//         setTotalCount: (totalCount) => {\r\n//             dispatch(setTotalCountAC(totalCount));\r\n//         },\r\n//         setCurrentPage: (currentPage) => {\r\n//             dispatch(setCurrentPageAC(currentPage));\r\n//         },\r\n//         toggleIsFetching: (isFetching) => {\r\n//             dispatch(toggleIsFetchingAC(isFetching));\r\n//         },\r\n//     }\r\n// }\r\n\r\n// export default connect(mapStateToProps, mapDispatchToProps)(UsersContainer);\r\n\r\n//теперь передаем объект вместо mapDispatchToProps\r\n//ключ и значение совпадают по имени, пишем один раз\r\n\r\n// let UsersContainerWitRedirect = WithAuthRedirect(UsersContainer)\r\n\r\nexport default compose(\r\n  withAuthRedirect,\r\n  connect(mapStateToProps, {\r\n    follow,\r\n    unfollow,\r\n    setCurrentPage,\r\n    toggleFollowingProgress,\r\n    getUsers\r\n  })\r\n)(UsersContainer);","import { authAPI } from \"../api/api\";\r\nimport {stopSubmit} from 'redux-form';\r\nimport { getAuthUserData } from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\r\n\r\n\r\nlet initialState = {\r\n    initialized: false\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS: \r\n            return {...state, \r\n                initialized: true\r\n            };\r\n        default:\r\n            return state;;\r\n    }\r\n}\r\n\r\nconst initializedSuccess = () => ({type: INITIALIZED_SUCCESS});\r\n\r\nexport const initializeApp = () => dispatch => {\r\n    let dispatchResult =  dispatch(getAuthUserData());\r\n    dispatchResult.then(()=> {\r\n        dispatch(initializedSuccess())\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default appReducer;","let inisialState = {}\r\n\r\nconst sidebarReducer = (state = inisialState, action) => {\r\n\r\n    return state;\r\n}\r\n\r\nexport default sidebarReducer;","import { applyMiddleware, combineReducers, compose, createStore } from \"redux\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport sidebarReducer from \"./sidebar-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport appReducer from \"./app-reducer\";\r\n\r\nlet reducers = combineReducers({\r\n    app: appReducer,\r\n    dialogsPage: dialogsReducer,\r\n    profilePage: profileReducer,\r\n    sidebar: sidebarReducer, \r\n    usersPageName: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n});\r\n\r\n//createStore - создание store из redux-библиотеки\r\n//используем applyMiddleware, чтобы добавить thunk middleware к стору\r\n// let store = createStore(reducers, applyMiddleware(thunkMiddleware)); \r\n\r\n//connect redux-extension\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\nwindow.store = store;\r\n\r\nexport default store; ","import React, { Suspense } from 'react';\nimport { connect } from 'react-redux';\nimport { Route, withRouter } from 'react-router-dom';\nimport { compose } from 'redux';\nimport './App.css';\nimport Preloader from './components/common/Preloader/Preloader';\nimport HeaderContainer from './components/Header/HeaderContainer';\nimport Login from './components/Login/Login';\nimport Navbar from './components/Navbar/Navbar';\nimport ProfileContainer from './components/Profile/ProfileContainer';\nimport UsersContainer from './components/Users/UsersContainer';\nimport { initializeApp } from './redux/app-reducer';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport store from './redux/redux-store';\nimport { withSuspense } from './hoc/withSuspense';\n\n//lezyload React.lazy\n// import DialogsContainer from './components/Dialogs/DialogsContainer';\nconst DialogsContainer = React.lazy(() => import ('./components/Dialogs/DialogsContainer'))\n\nclass App extends React.Component {\n  componentDidMount() {\n    this.props.initializeApp();\n }\n\n  render() {\n    if (!this.props.initialized) {return <Preloader/>}\n    \n    return (\n      <div className=\"app-wrapper\">\n        <HeaderContainer/>\n        <Navbar/>\n        <div className=\"app-wrapper-content\">\n  \n          <Route exact path=\"/profile/:userId?\" render={ () => <ProfileContainer/> } />\n  \n          {/* <Route path=\"/messages\" render={ () => {return <Suspense fallback={<Preloader/>}><DialogsContainer /></Suspense> }} /> */}\n          <Route path=\"/messages\" render={withSuspense(DialogsContainer)} />\n  \n          <Route path=\"/users\" render={ () => <UsersContainer /> } />\n  \n          <Route path=\"/login\" render={ () => <Login /> } />\n  \n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  initialized: state.app.initialized,\n})\n\n\nlet AppContainer =  compose(\n    withRouter,\n    connect(mapStateToProps, {initializeApp}))(App);\n\n\nconst MainApp = (props) => {\n  return (\n    <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\n        <AppContainer />\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>\n  )\n}\n\nexport default MainApp;","import React, { Suspense } from \"react\"\r\nimport Preloader from \"../components/common/Preloader/Preloader\"\r\n\r\nexport const withSuspense = (Component) => {\r\n    return (props) => {\r\n        return <Suspense fallback={<Preloader/>}>\r\n            <Component {...props} />\r\n        </Suspense> \r\n    }\r\n}\r\n\r\n","import reportWebVitals from './reportWebVitals';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport MainApp from './App';\n\n\nReactDOM.render(\n  <MainApp/>, document.getElementById('root')\n);\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export const required = value => {\r\n    if (value) return undefined\r\n\r\n    return \"Field is required!\";\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength) => {\r\n    return value => {\r\n        if (value && value.length > maxLength ) return `Max length is ${maxLength} symbols`;\r\n    \r\n        return undefined;\r\n    }\r\n}\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__1DQbL\",\"formInfo\":\"FormsControls_formInfo__2BLgs\",\"error\":\"FormsControls_error__yLs3a\",\"formCommonError\":\"FormsControls_formCommonError__RRRJo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__8tmd8\",\"userImg\":\"Users_userImg__3-9FK\",\"userItem\":\"Users_userItem__1O0qC\",\"userInfo\":\"Users_userInfo__1SCuS\"};","import React from \"react\"\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n\r\nconst mapStateToPropsForRedirect = (state) => {\r\n    return {\r\n       isAuth: state.auth.isAuth\r\n    }\r\n  }\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n\r\n    class RedirectComponent extends React.Component {\r\n\r\n        render() {\r\n            if(!this.props.isAuth) return <Redirect  to={'/login'}/>\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n\r\n    let ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent)\r\n\r\n    return ConnectedAuthRedirectComponent;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2xnXF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"Post_post__q1744\",\"avatar\":\"Post_avatar__jDsG5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageNumber\":\"Pagination_pageNumber__3cz1o\",\"pageActive\":\"Pagination_pageActive__3uVJb\"};"],"sourceRoot":""}